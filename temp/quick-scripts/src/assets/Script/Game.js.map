{"version":3,"sources":["assets\\Script\\Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import {EventMgr} from \"./common/EventManager\";\r\nimport {HttpHelper} from \"./common/HttpHelper\";\r\nconst Token =\"eyJhbGciOiJIUzUxMiJ9.eyJ1c2VyX2lkIjoxNjAxODgzLCJsb2dpbl90eXBlIjoxLCJ1c2VyX2tleSI6IjlkODU1NDg0LWRhZGQtNDgxMC04YTg3LTM1OGJkMzRmYmViZSIsInRva2VuX3R5cGUiOiJhcHAiLCJ1c2VybmFtZSI6IuS8mOmfszcwOTgwMiJ9.SFlJPBuh9na9JW7P5pWJTHdWribEN28JVvfq4a5zLr22qyeh2Vfkq22Z6KiqKB2QszOMtEoJqlMEbv1l-8qPPg\";\r\nconst {ccclass, property} = cc._decorator;\r\n\r\nexport interface IUserInfo {\r\n  appToken: string; // appToken\r\n  authStatus: 0 | 1; // 实名状态：0->未实名，1->已实名\r\n  avatar: string;\r\n  emToken: string; // 环信emToken\r\n  firstLogin: boolean;\r\n  phoneNumber: string;\r\n  registerType: 1 | 2 | 3 | 4; // 注册类型：1->手机登录注册，2->微信登录注册，3->苹果登录注册，4->QQ登录注册\r\n  teenModeSwitch: 1 | 0;\r\n  userId: number;\r\n  userName: string;\r\n  userType: 1 | 2; // 用户类型：1-用户，2-主播\r\n}\r\n\r\n@ccclass\r\nexport default class Game extends cc.Component {\r\n    public static instance: Game = null;\r\n    img: HTMLImageElement;\r\n    protected onLoad(): void {\r\n        Game.instance = this;\r\n        this.initEvents();\r\n        this.initWebpImg();\r\n        this.initUserInfo();\r\n    }\r\n    initEvents(){\r\n        EventMgr.on(\"onGetUserInfo\",this.onGetUserInfo,this);\r\n    }\r\n    initUserInfo(){\r\n        let WebViewJavascriptBridge = window[\"WebViewJavascriptBridge\"];\r\n        if(WebViewJavascriptBridge){\r\n            WebViewJavascriptBridge.callHandler(\"getUserInfo\", {}, function(res: IUserInfo) { \r\n                console.log(\"====\",res);\r\n                if(typeof res == \"object\"){\r\n                    HttpHelper.token=res.appToken;\r\n                }\r\n                if(typeof  res == \"string\"){\r\n                    let userInfo = JSON.parse(res);\r\n                    HttpHelper.token=userInfo.appToken;\r\n                }\r\n                EventMgr.emit(\"onGetUserInfo\")\r\n            });\r\n            return;\r\n        }\r\n        HttpHelper.token=Token;\r\n        EventMgr.emit(\"onGetUserInfo\")\r\n    }\r\n    onGetUserInfo(){\r\n        // 获取用户数据\r\n        HttpHelper.HttpPost(\"logic/getPlayerInfo\", {}, (err, data)=>{\r\n            console.log(\"====获取用户数据\");\r\n        });\r\n    }\r\n    protected onDestroy(): void {\r\n        Game.instance = null;\r\n        EventMgr.clearByTarget(this);\r\n    }\r\n\r\n    start () {\r\n        \r\n    }\r\n    initWebpImg(){\r\n        const img = document.createElement('img');\r\n        // img.src = 'webp/1.webp';\r\n        // 设置样式属性（可选）\r\n        img.style.position = 'absolute';\r\n        img.style.left = '0';\r\n        img.style.top = '0';\r\n        img.style.width = '375';\r\n        img.style.height = 'auto';\r\n        // 默认隐藏\r\n        img.style.display = 'none'; \r\n        // 添加到 DOM\r\n        document.body.appendChild(img);\r\n        this.img = img;\r\n    }\r\n    play(src){\r\n        this.img.src = \"webp/\"+src;\r\n        this.img.style.display = 'block';\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}