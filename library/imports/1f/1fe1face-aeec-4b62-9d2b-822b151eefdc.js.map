{"version":3,"sources":["assets/Script/Game.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,sDAA+C;AAC/C,kDAA+C;AAC/C,IAAM,KAAK,GAAE,0RAA0R,CAAC;AAClS,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAiB1C;IAAkC,wBAAY;IAA9C;;IAkEA,CAAC;aAlEoB,IAAI;IAGX,qBAAM,GAAhB;QACI,MAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IACD,yBAAU,GAAV;QACI,uBAAQ,CAAC,EAAE,CAAC,eAAe,EAAC,IAAI,CAAC,aAAa,EAAC,IAAI,CAAC,CAAC;IACzD,CAAC;IACD,2BAAY,GAAZ;QACI,IAAI,uBAAuB,GAAG,MAAM,CAAC,yBAAyB,CAAC,CAAC;QAChE,IAAG,uBAAuB,EAAC;YACvB,uBAAuB,CAAC,WAAW,CAAC,aAAa,EAAE,EAAE,EAAE,UAAS,GAAc;gBAC1E,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC,GAAG,CAAC,CAAC;gBACxB,IAAG,OAAO,GAAG,IAAI,QAAQ,EAAC;oBACtB,uBAAU,CAAC,KAAK,GAAC,GAAG,CAAC,QAAQ,CAAC;iBACjC;gBACD,IAAG,OAAQ,GAAG,IAAI,QAAQ,EAAC;oBACvB,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;oBAC/B,uBAAU,CAAC,KAAK,GAAC,QAAQ,CAAC,QAAQ,CAAC;iBACtC;gBACD,uBAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;YAClC,CAAC,CAAC,CAAC;YACH,OAAO;SACV;QACD,uBAAU,CAAC,KAAK,GAAC,KAAK,CAAC;QACvB,uBAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;IAClC,CAAC;IACD,4BAAa,GAAb;QACI,SAAS;QACT,uBAAU,CAAC,QAAQ,CAAC,qBAAqB,EAAE,EAAE,EAAE,UAAC,GAAG,EAAE,IAAI;YACrD,OAAO,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;QAC9B,CAAC,CAAC,CAAC;IACP,CAAC;IACS,wBAAS,GAAnB;QACI,MAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,uBAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,oBAAK,GAAL;IAEA,CAAC;IACD,0BAAW,GAAX;QACI,IAAM,GAAG,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAC1C,2BAA2B;QAC3B,aAAa;QACb,GAAG,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QAChC,GAAG,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,CAAC;QACrB,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC;QACpB,GAAG,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;QACxB,GAAG,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;QAC1B,OAAO;QACP,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;QAC3B,UAAU;QACV,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QAC/B,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IACnB,CAAC;IACD,mBAAI,GAAJ,UAAK,GAAG;QACJ,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,OAAO,GAAC,GAAG,CAAC;QAC3B,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;IACrC,CAAC;;IA9Da,aAAQ,GAAS,IAAI,CAAC;IADnB,IAAI;QADxB,OAAO;OACa,IAAI,CAkExB;IAAD,WAAC;CAlED,AAkEC,CAlEiC,EAAE,CAAC,SAAS,GAkE7C;kBAlEoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["import {EventMgr} from \"./common/EventManager\";\nimport {HttpHelper} from \"./common/HttpHelper\";\nconst Token =\"eyJhbGciOiJIUzUxMiJ9.eyJ1c2VyX2lkIjoxNjAxODgzLCJsb2dpbl90eXBlIjoxLCJ1c2VyX2tleSI6IjlkODU1NDg0LWRhZGQtNDgxMC04YTg3LTM1OGJkMzRmYmViZSIsInRva2VuX3R5cGUiOiJhcHAiLCJ1c2VybmFtZSI6IuS8mOmfszcwOTgwMiJ9.SFlJPBuh9na9JW7P5pWJTHdWribEN28JVvfq4a5zLr22qyeh2Vfkq22Z6KiqKB2QszOMtEoJqlMEbv1l-8qPPg\";\nconst {ccclass, property} = cc._decorator;\n\nexport interface IUserInfo {\n  appToken: string; // appToken\n  authStatus: 0 | 1; // 实名状态：0->未实名，1->已实名\n  avatar: string;\n  emToken: string; // 环信emToken\n  firstLogin: boolean;\n  phoneNumber: string;\n  registerType: 1 | 2 | 3 | 4; // 注册类型：1->手机登录注册，2->微信登录注册，3->苹果登录注册，4->QQ登录注册\n  teenModeSwitch: 1 | 0;\n  userId: number;\n  userName: string;\n  userType: 1 | 2; // 用户类型：1-用户，2-主播\n}\n\n@ccclass\nexport default class Game extends cc.Component {\n    public static instance: Game = null;\n    img: HTMLImageElement;\n    protected onLoad(): void {\n        Game.instance = this;\n        this.initEvents();\n        this.initWebpImg();\n        this.initUserInfo();\n    }\n    initEvents(){\n        EventMgr.on(\"onGetUserInfo\",this.onGetUserInfo,this);\n    }\n    initUserInfo(){\n        let WebViewJavascriptBridge = window[\"WebViewJavascriptBridge\"];\n        if(WebViewJavascriptBridge){\n            WebViewJavascriptBridge.callHandler(\"getUserInfo\", {}, function(res: IUserInfo) { \n                console.log(\"====\",res);\n                if(typeof res == \"object\"){\n                    HttpHelper.token=res.appToken;\n                }\n                if(typeof  res == \"string\"){\n                    let userInfo = JSON.parse(res);\n                    HttpHelper.token=userInfo.appToken;\n                }\n                EventMgr.emit(\"onGetUserInfo\")\n            });\n            return;\n        }\n        HttpHelper.token=Token;\n        EventMgr.emit(\"onGetUserInfo\")\n    }\n    onGetUserInfo(){\n        // 获取用户数据\n        HttpHelper.HttpPost(\"logic/getPlayerInfo\", {}, (err, data)=>{\n            console.log(\"====获取用户数据\");\n        });\n    }\n    protected onDestroy(): void {\n        Game.instance = null;\n        EventMgr.clearByTarget(this);\n    }\n\n    start () {\n        \n    }\n    initWebpImg(){\n        const img = document.createElement('img');\n        // img.src = 'webp/1.webp';\n        // 设置样式属性（可选）\n        img.style.position = 'absolute';\n        img.style.left = '0';\n        img.style.top = '0';\n        img.style.width = '375';\n        img.style.height = 'auto';\n        // 默认隐藏\n        img.style.display = 'none'; \n        // 添加到 DOM\n        document.body.appendChild(img);\n        this.img = img;\n    }\n    play(src){\n        this.img.src = \"webp/\"+src;\n        this.img.style.display = 'block';\n    }\n\n    // update (dt) {}\n}\n"]}